{"ast":null,"code":"import React,{useEffect,useState}from'react';import{listFiles,deleteFiles}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DeleteFiles(){const[files,setFiles]=useState([]);const[selected,setSelected]=useState([]);const[loading,setLoading]=useState(false);const[message,setMessage]=useState(\"\");const[error,setError]=useState(\"\");const[confirming,setConfirming]=useState(false);useEffect(()=>{setLoading(true);listFiles().then(data=>setFiles(data.files||[])).catch(()=>setError(\"Failed to load files.\")).finally(()=>setLoading(false));},[]);const handleCheck=key=>{setSelected(selected=>selected.includes(key)?selected.filter(k=>k!==key):[...selected,key]);};const handleDelete=async()=>{setError(\"\");setMessage(\"\");setConfirming(false);setLoading(true);try{await deleteFiles(selected);setFiles(files.filter(f=>!selected.includes(f.key)));setSelected([]);setMessage(\"Selected files deleted successfully.\");}catch(err){setError(\"Failed to delete files.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:600,margin:'40px auto',background:'#fff',borderRadius:8,boxShadow:'0 2px 8px #0001',padding:32},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',marginBottom:24},children:\"Delete Files\"}),message&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green',marginBottom:16},children:message}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginBottom:16},children:error}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):files.length===0?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',color:'#888'},children:\"No files found.\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginBottom:16},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f5f5f5'},children:[/*#__PURE__*/_jsx(\"th\",{style:{width:40}}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:8},children:\"File Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'right',padding:8},children:\"Size\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'right',padding:8},children:\"Last Modified\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:files.map(f=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #eee'},children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selected.includes(f.key),onChange:()=>handleCheck(f.key)})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:f.key}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'right',padding:8},children:f.size||'-'}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'right',padding:8},children:f.lastModified||'-'})]},f.key))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirming(true),disabled:selected.length===0||loading,style:{background:selected.length===0||loading?'#ccc':'#e53935',color:'#fff',border:'none',borderRadius:4,padding:'10px 24px',fontWeight:600,cursor:selected.length===0||loading?'not-allowed':'pointer',width:'100%',marginTop:8},children:\"Delete Selected\"}),confirming&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#0008',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',padding:32,borderRadius:8,minWidth:320,textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm Deletion\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Are you sure you want to delete \",selected.length,\" file(s)? This action cannot be undone.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,style:{background:'#e53935',color:'#fff',border:'none',borderRadius:4,padding:'8px 20px',marginRight:12},children:\"Yes, Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirming(false),style:{background:'#eee',color:'#333',border:'none',borderRadius:4,padding:'8px 20px'},children:\"Cancel\"})]})})]});}export default DeleteFiles;","map":{"version":3,"names":["React","useEffect","useState","listFiles","deleteFiles","jsx","_jsx","jsxs","_jsxs","DeleteFiles","files","setFiles","selected","setSelected","loading","setLoading","message","setMessage","error","setError","confirming","setConfirming","then","data","catch","finally","handleCheck","key","includes","filter","k","handleDelete","f","err","style","maxWidth","margin","background","borderRadius","boxShadow","padding","children","textAlign","marginBottom","color","length","width","borderCollapse","map","borderBottom","type","checked","onChange","size","lastModified","onClick","disabled","border","fontWeight","cursor","marginTop","position","top","left","height","display","alignItems","justifyContent","zIndex","minWidth","marginRight"],"sources":["/workspaces/codespaces-blank/ServerlessProject/frontend/src/pages/DeleteFiles.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { listFiles, deleteFiles } from '../api';\n\nfunction DeleteFiles() {\n  const [files, setFiles] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [confirming, setConfirming] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    listFiles()\n      .then(data => setFiles(data.files || []))\n      .catch(() => setError(\"Failed to load files.\"))\n      .finally(() => setLoading(false));\n  }, []);\n\n  const handleCheck = (key) => {\n    setSelected(selected =>\n      selected.includes(key)\n        ? selected.filter(k => k !== key)\n        : [...selected, key]\n    );\n  };\n\n  const handleDelete = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    setConfirming(false);\n    setLoading(true);\n    try {\n      await deleteFiles(selected);\n      setFiles(files.filter(f => !selected.includes(f.key)));\n      setSelected([]);\n      setMessage(\"Selected files deleted successfully.\");\n    } catch (err) {\n      setError(\"Failed to delete files.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: 600, margin: '40px auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #0001', padding: 32 }}>\n      <h2 style={{ textAlign: 'center', marginBottom: 24 }}>Delete Files</h2>\n      {message && <div style={{ color: 'green', marginBottom: 16 }}>{message}</div>}\n      {error && <div style={{ color: 'red', marginBottom: 16 }}>{error}</div>}\n      {loading ? (\n        <div>Loading...</div>\n      ) : files.length === 0 ? (\n        <div style={{ textAlign: 'center', color: '#888' }}>No files found.</div>\n      ) : (\n        <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: 16 }}>\n          <thead>\n            <tr style={{ background: '#f5f5f5' }}>\n              <th style={{ width: 40 }}></th>\n              <th style={{ textAlign: 'left', padding: 8 }}>File Name</th>\n              <th style={{ textAlign: 'right', padding: 8 }}>Size</th>\n              <th style={{ textAlign: 'right', padding: 8 }}>Last Modified</th>\n            </tr>\n          </thead>\n          <tbody>\n            {files.map(f => (\n              <tr key={f.key} style={{ borderBottom: '1px solid #eee' }}>\n                <td style={{ textAlign: 'center' }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={selected.includes(f.key)}\n                    onChange={() => handleCheck(f.key)}\n                  />\n                </td>\n                <td style={{ padding: 8 }}>{f.key}</td>\n                <td style={{ textAlign: 'right', padding: 8 }}>{f.size || '-'}</td>\n                <td style={{ textAlign: 'right', padding: 8 }}>{f.lastModified || '-'}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      <button\n        onClick={() => setConfirming(true)}\n        disabled={selected.length === 0 || loading}\n        style={{\n          background: selected.length === 0 || loading ? '#ccc' : '#e53935',\n          color: '#fff',\n          border: 'none',\n          borderRadius: 4,\n          padding: '10px 24px',\n          fontWeight: 600,\n          cursor: selected.length === 0 || loading ? 'not-allowed' : 'pointer',\n          width: '100%',\n          marginTop: 8\n        }}\n      >\n        Delete Selected\n      </button>\n      {confirming && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh',\n          background: '#0008', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000\n        }}>\n          <div style={{ background: '#fff', padding: 32, borderRadius: 8, minWidth: 320, textAlign: 'center' }}>\n            <h3>Confirm Deletion</h3>\n            <p>Are you sure you want to delete {selected.length} file(s)? This action cannot be undone.</p>\n            <button onClick={handleDelete} style={{ background: '#e53935', color: '#fff', border: 'none', borderRadius: 4, padding: '8px 20px', marginRight: 12 }}>Yes, Delete</button>\n            <button onClick={() => setConfirming(false)} style={{ background: '#eee', color: '#333', border: 'none', borderRadius: 4, padding: '8px 20px' }}>Cancel</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\nexport default DeleteFiles;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}